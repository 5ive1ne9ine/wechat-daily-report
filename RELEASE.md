# 🚀 自动化发布流程说明

本项目已配置完全自动化的版本发布流程，无需手动管理版本号、创建标签或发布Release。

## 📋 工作原理

### 触发条件
当你向 `main` 或 `master` 分支推送代码时，系统会自动：

1. **检查提交信息**：根据提交信息中的关键词决定是否需要发布新版本
2. **自动版本管理**：根据提交类型自动更新版本号
3. **跨平台构建**：同时构建 macOS、Windows、Linux 三个平台的安装包
4. **创建Release**：自动创建GitHub Release并上传所有安装包
5. **更新官网**：自动更新官网的下载链接

### 版本更新规则

根据提交信息中的关键词自动决定版本更新类型：

| 提交关键词 | 版本更新类型 | 示例 |
|-----------|-------------|------|
| `BREAKING` 或 `breaking` | 主版本 (1.0.0 → 2.0.0) | `BREAKING: 重构API接口` |
| `feat` | 次版本 (1.0.0 → 1.1.0) | `feat: 添加新的AI分析功能` |
| `fix`, `perf`, `refactor`, `style`, `test`, `docs`, `build`, `ci`, `chore` | 补丁版本 (1.0.0 → 1.0.1) | `fix: 修复导出功能bug` |

## 🎯 如何使用

### 1. 日常开发
正常进行开发，按照约定的提交信息格式提交代码：

```bash
# 新功能
git commit -m "feat: 添加群聊数据导入功能"

# 修复bug
git commit -m "fix: 修复macOS下文件保存问题"

# 性能优化
git commit -m "perf: 优化AI分析速度"

# 重大更新
git commit -m "BREAKING: 重构整个UI界面"
```

### 2. 推送到主分支
```bash
git push origin main
```

### 3. 自动化流程
推送后，GitHub Actions 会自动：
- ✅ 分析提交信息
- ✅ 更新版本号
- ✅ 构建所有平台的安装包
- ✅ 创建GitHub Release
- ✅ 更新官网下载链接

### 4. 查看结果
- 在 [GitHub Actions](https://github.com/mengjian-github/wechat-daily-report/actions) 页面查看构建进度
- 在 [Releases](https://github.com/mengjian-github/wechat-daily-report/releases) 页面查看发布的版本
- 官网下载链接会自动更新

## 🔧 配置说明

### 忽略的文件
以下文件的更改不会触发发布：
- `README.md`
- `docs/**`
- `.gitignore`
- `website/**`

### 构建平台
- **macOS**: Intel 和 Apple Silicon 两个版本
- **Windows**: x64 版本
- **Linux**: AppImage 格式

## 🚨 注意事项

1. **提交信息格式**：确保提交信息包含正确的关键词，否则不会触发发布
2. **构建时间**：完整的跨平台构建大约需要 15-20 分钟
3. **网络问题**：如果构建失败，通常是网络问题，可以重新运行 Action
4. **权限设置**：确保 GitHub Actions 有足够的权限创建 Release 和推送代码

## 📊 发布状态

可以通过以下方式查看发布状态：

- **GitHub Actions 页面**：查看详细的构建日志
- **Releases 页面**：查看已发布的版本
- **官网**：确认下载链接是否已更新

## 🛠️ 故障排除

### 构建失败
1. 检查 GitHub Actions 日志
2. 确认依赖是否正确安装
3. 检查代码是否有语法错误

### 版本号未更新
1. 确认提交信息包含正确的关键词
2. 检查是否推送到了正确的分支

### 官网链接未更新
1. 检查 GitHub CLI 是否正常工作
2. 确认 Release 是否成功创建
3. 检查网站部署脚本是否正常

## 🎉 优势

- **零手动操作**：推送代码即可完成发布
- **版本管理自动化**：根据提交类型智能更新版本
- **跨平台支持**：一次构建，多平台发布
- **官网同步更新**：下载链接自动更新
- **完整的发布记录**：每次发布都有详细的日志和说明

---

现在你只需要专注于代码开发，版本发布的所有事情都会自动处理！🎊 